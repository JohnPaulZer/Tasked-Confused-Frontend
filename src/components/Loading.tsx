import React, { useEffect, useState } from 'react';

const Loading = () => {
  // Animation progress state (0 to 1)
  const [progress, setProgress] = useState(0);

  useEffect(() => {
    // Simple animation loop on mount
    const timer = setTimeout(() => setProgress(1), 100);
    return () => clearTimeout(timer);
  }, []);

  // Configuration for each row:
  // maxWidth: The full width of the bar as drawn in the SVG
  // delay: Stagger the start of each pencil slightly
  const rows = [
    { id: 1, maxWidth: 36, delay: '0ms' },
    { id: 2, maxWidth: 189, delay: '150ms' },
    { id: 3, maxWidth: 329, delay: '300ms' },
    { id: 4, maxWidth: 329, delay: '450ms' },
    { id: 5, maxWidth: 31, delay: '600ms' },
  ];

  return (
    <div className="flex min-h-screen items-center justify-center bg-gray-50 p-8">
      {/* Container with shadow and rounded corners */}
      <div className="relative rounded-xl bg-white p-4 shadow-2xl">
        <svg
          width="469"
          height="575"
          viewBox="0 0 469 575"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="max-w-full"
        >
          {/* Background Dotted Border */}
          <rect
            x="0.5"
            y="0.5"
            width="468"
            height="574"
            rx="4.5"
            stroke="#8A38F5"
            strokeDasharray="10 5"
            className="opacity-30"
          />

          {rows.map((row, index) => {
            // Calculate current width based on global progress
            // We use a cubic-bezier-like ease out for smooth visual
            const currentWidth = row.maxWidth * progress;
            
            // Calculate how far to shift the pencil back.
            // The pencils are drawn at the "end" position in the SVG.
            // If progress is 0, we shift -maxWidth. If 1, shift 0.
            // const translateX = row.maxWidth * (progress - 1);

            // Y offsets for the bars based on the original SVG
            const yPositions = [101, 212, 323, 434, 545];
            const y = yPositions[index];

            return (
              <g key={row.id} style={{ transition: `all 1.5s ease-out ${row.delay}` }}>
                {/* Dark Background Bar */}
                <rect x="20" y={y} width="334" height="10" rx="5" fill="#6E5034" />

                {/* Animated Fill Bar */}
                <rect
                  x="20"
                  y={y}
                  width={currentWidth}
                  height="10"
                  rx="5"
                  fill="#CDB885"
                  className="transition-all duration-[1500ms] ease-out"
                />
              </g>
            );
          })}

          {/* PENCIL GROUPS 
            We wrap the paths for each pencil in a <g> and apply the translation.
            This links the pencil position to the bar width.
          */}
          
          {/* Row 1 Pencil */}
          <g
            className="transition-transform duration-[1500ms] ease-out drop-shadow-lg"
            style={{ transform: `translateX(${rows[0].maxWidth * (progress - 1)}px)` }}
          >
            <path d="M81.5577 51.1078L56.3355 82.1821C56.1809 82.3702 56.06 82.5852 55.9727 82.8136L52.6939 91.4203C51.9683 93.3285 53.7823 95.2164 55.5158 94.3363L63.5917 90.2311C63.8202 90.1169 64.0352 89.9489 64.2098 89.7541L91.8105 58.7135C92.2875 58.1827 92.4891 57.4302 92.3547 56.7045C91.8642 54.0439 89.9225 48.1247 82.5117 50.436C82.1422 50.5502 81.813 50.792 81.5577 51.1078Z" fill="#BCAAA4"/>
            <path d="M63.5917 90.2378L55.5157 94.343C53.789 95.2231 51.9682 93.3352 52.6939 91.427L55.9726 82.8203L63.5917 90.2378Z" fill="#BDBDBD"/>
            <path d="M81 51.128C84.4534 47.3386 97.7498 33.2426 105.678 29.7758C108.681 28.4589 112.457 30.7634 111.496 34.5058C110.166 39.6591 91.5887 60.8701 91.5887 60.8701C91.2057 61.3606 89.7545 61.7033 89.3178 61.5219C89.17 61.4614 89.7209 61.1456 89.6134 60.9709L89.5328 60.6417C89.4656 60.373 89.3581 60.1109 89.2103 59.8758C87.3559 56.9531 84.7692 54.9912 81.3493 53.4258C80.9731 53.2511 79.71 53.2578 79.71 53.2578C79.71 52.3037 80.4625 51.7192 81 51.128Z" fill="black"/>
            <path d="M53.2986 90.0363L52.3983 92.2669C51.7667 93.8256 53.3456 95.3642 54.8372 94.6453L57.1753 93.53L53.2986 90.0363Z" fill="#212121"/>
            <path d="M72.998 75.1273L72.6554 74.8115C72.5424 74.7079 72.4743 74.5643 72.4656 74.4112C72.4568 74.2582 72.508 74.1078 72.6083 73.9919L85.6494 59.1233C85.6987 59.0675 85.7585 59.0219 85.8254 58.9893C85.8924 58.9568 85.9651 58.9377 86.0394 58.9333C86.1137 58.929 86.1882 58.9394 86.2584 58.9639C86.3287 58.9884 86.3935 59.0266 86.4489 59.0762L86.7916 59.392C87.0268 59.607 87.0469 59.9765 86.8386 60.2117L73.7975 75.087C73.7483 75.1432 73.6883 75.1888 73.6211 75.2214C73.5539 75.2539 73.4809 75.2726 73.4063 75.2763C73.3317 75.2801 73.2572 75.2688 73.187 75.2432C73.1169 75.2176 73.0526 75.1782 72.998 75.1273Z" fill="#FAFAFA"/>
            <path d="M81.2284 50.745C84.6818 47.0094 98.4083 32.2348 106.336 28.8083C109.34 27.5116 113.116 29.7691 112.155 33.4509C110.825 38.5236 92.4622 59.775 92.4622 59.775C91.9515 60.42 90.9169 60.3662 90.4936 59.6675C88.6123 56.5567 85.7098 54.138 82.2362 52.7741L81.6651 52.5523C80.9059 52.25 80.6842 51.3295 81.2284 50.745Z" fill="#795548"/>
            <path d="M98.9457 53.4459C103.454 48.0105 107.122 44.2076 111.281 37.7173C111.658 37.1261 112.585 37.9861 112.222 38.6109C109.178 43.9859 101.922 52.2298 100.061 54.353C99.5907 54.8837 98.5493 53.923 98.9457 53.4459Z" fill="black"/>
            <path d="M112.047 38.9939C111.711 39.4575 111.053 39.5583 110.589 39.2223L109.582 38.49C109.359 38.3262 109.21 38.0811 109.167 37.808C109.125 37.535 109.191 37.2561 109.353 37.032C109.689 36.5684 110.348 36.4676 110.811 36.8036L111.819 37.5359C112.289 37.8719 112.39 38.5303 112.047 38.9939Z" fill="black"/>
            <path d="M55.9727 82.8136C55.9727 82.8136 56.0869 82.5515 56.1406 82.4709C56.1809 82.397 56.3355 82.182 56.3355 82.182L64.2098 89.754C64.2098 89.754 63.9948 89.969 63.9008 90.0362C63.8134 90.1034 63.5917 90.2311 63.5917 90.2311L55.9727 82.8136Z" fill="white"/>
          </g>

          {/* Row 2 Pencil */}
          <g
            className="transition-transform duration-[1500ms] ease-out drop-shadow-lg"
            style={{ transform: `translateX(${rows[1].maxWidth * (progress - 1)}px)` }}
          >
            <path d="M238.558 162.108L213.335 193.182C213.181 193.37 213.06 193.585 212.973 193.814L209.694 202.42C208.968 204.328 210.782 206.216 212.516 205.336L220.592 201.231C220.82 201.117 221.035 200.949 221.21 200.754L248.81 169.713C249.288 169.183 249.489 168.43 249.355 167.705C248.864 165.044 246.923 159.125 239.512 161.436C239.142 161.55 238.813 161.792 238.558 162.108Z" fill="#BCAAA4"/>
            <path d="M220.592 201.238L212.516 205.343C210.789 206.223 208.968 204.335 209.694 202.427L212.973 193.82L220.592 201.238Z" fill="#BDBDBD"/>
            <path d="M238 162.128C241.453 158.339 254.75 144.243 262.678 140.776C265.681 139.459 269.457 141.763 268.496 145.506C267.166 150.659 248.589 171.87 248.589 171.87C248.206 172.361 246.754 172.703 246.318 172.522C246.17 172.461 246.721 172.146 246.613 171.971L246.533 171.642C246.466 171.373 246.358 171.111 246.21 170.876C244.356 167.953 241.769 165.991 238.349 164.426C237.973 164.251 236.71 164.258 236.71 164.258C236.71 163.304 237.462 162.719 238 162.128Z" fill="black"/>
            <path d="M210.299 201.036L209.398 203.267C208.767 204.826 210.346 206.364 211.837 205.645L214.175 204.53L210.299 201.036Z" fill="#212121"/>
            <path d="M229.998 186.127L229.655 185.812C229.542 185.708 229.474 185.564 229.466 185.411C229.457 185.258 229.508 185.108 229.608 184.992L242.649 170.123C242.699 170.067 242.758 170.022 242.825 169.989C242.892 169.957 242.965 169.938 243.039 169.933C243.114 169.929 243.188 169.939 243.258 169.964C243.329 169.988 243.393 170.027 243.449 170.076L243.792 170.392C244.027 170.607 244.047 170.977 243.839 171.212L230.798 186.087C230.748 186.143 230.688 186.189 230.621 186.221C230.554 186.254 230.481 186.273 230.406 186.276C230.332 186.28 230.257 186.269 230.187 186.243C230.117 186.218 230.053 186.178 229.998 186.127Z" fill="#FAFAFA"/>
            <path d="M238.228 161.745C241.682 158.009 255.408 143.235 263.336 139.808C266.34 138.512 270.116 140.769 269.155 144.451C267.825 149.524 249.462 170.775 249.462 170.775C248.952 171.42 247.917 171.366 247.494 170.667C245.612 167.557 242.71 165.138 239.236 163.774L238.665 163.552C237.906 163.25 237.684 162.33 238.228 161.745Z" fill="#795548"/>
            <path d="M255.946 164.446C260.454 159.01 264.122 155.208 268.281 148.717C268.658 148.126 269.585 148.986 269.222 149.611C266.178 154.986 258.922 163.23 257.061 165.353C256.591 165.884 255.549 164.923 255.946 164.446Z" fill="black"/>
            <path d="M269.047 149.994C268.711 150.457 268.053 150.558 267.589 150.222L266.582 149.49C266.359 149.326 266.21 149.081 266.167 148.808C266.125 148.535 266.191 148.256 266.353 148.032C266.689 147.568 267.348 147.468 267.811 147.804L268.819 148.536C269.289 148.872 269.39 149.53 269.047 149.994Z" fill="black"/>
            <path d="M212.973 193.814C212.973 193.814 213.087 193.552 213.141 193.471C213.181 193.397 213.335 193.182 213.335 193.182L221.21 200.754C221.21 200.754 220.995 200.969 220.901 201.036C220.813 201.103 220.592 201.231 220.592 201.231L212.973 193.814Z" fill="white"/>
          </g>

          {/* Row 3 Pencil */}
          <g
            className="transition-transform duration-[1500ms] ease-out drop-shadow-lg"
            style={{ transform: `translateX(${rows[2].maxWidth * (progress - 1)}px)` }}
          >
            <path d="M380.558 273.108L355.335 304.182C355.181 304.37 355.06 304.585 354.973 304.814L351.694 313.42C350.968 315.328 352.782 317.216 354.516 316.336L362.592 312.231C362.82 312.117 363.035 311.949 363.21 311.754L390.81 280.713C391.288 280.183 391.489 279.43 391.355 278.705C390.864 276.044 388.923 270.125 381.512 272.436C381.142 272.55 380.813 272.792 380.558 273.108Z" fill="#BCAAA4"/>
            <path d="M362.592 312.238L354.516 316.343C352.789 317.223 350.968 315.335 351.694 313.427L354.973 304.82L362.592 312.238Z" fill="#BDBDBD"/>
            <path d="M380 273.128C383.453 269.339 396.75 255.243 404.678 251.776C407.681 250.459 411.457 252.763 410.496 256.506C409.166 261.659 390.589 282.87 390.589 282.87C390.206 283.361 388.754 283.703 388.318 283.522C388.17 283.461 388.721 283.146 388.613 282.971L388.533 282.642C388.466 282.373 388.358 282.111 388.21 281.876C386.356 278.953 383.769 276.991 380.349 275.426C379.973 275.251 378.71 275.258 378.71 275.258C378.71 274.304 379.462 273.719 380 273.128Z" fill="black"/>
            <path d="M352.299 312.036L351.398 314.267C350.767 315.826 352.346 317.364 353.837 316.645L356.175 315.53L352.299 312.036Z" fill="#212121"/>
            <path d="M371.998 297.127L371.655 296.812C371.542 296.708 371.474 296.564 371.466 296.411C371.457 296.258 371.508 296.108 371.608 295.992L384.649 281.123C384.699 281.067 384.758 281.022 384.825 280.989C384.892 280.957 384.965 280.938 385.039 280.933C385.114 280.929 385.188 280.939 385.258 280.964C385.329 280.988 385.393 281.027 385.449 281.076L385.792 281.392C386.027 281.607 386.047 281.977 385.839 282.212L372.798 297.087C372.748 297.143 372.688 297.189 372.621 297.221C372.554 297.254 372.481 297.273 372.406 297.276C372.332 297.28 372.257 297.269 372.187 297.243C372.117 297.218 372.053 297.178 371.998 297.127Z" fill="#FAFAFA"/>
            <path d="M380.228 272.745C383.682 269.009 397.408 254.235 405.336 250.808C408.34 249.512 412.116 251.769 411.155 255.451C409.825 260.524 391.462 281.775 391.462 281.775C390.952 282.42 389.917 282.366 389.494 281.667C387.612 278.557 384.71 276.138 381.236 274.774L380.665 274.552C379.906 274.25 379.684 273.33 380.228 272.745Z" fill="#795548"/>
            <path d="M397.946 275.446C402.454 270.01 406.122 266.208 410.281 259.717C410.658 259.126 411.585 259.986 411.222 260.611C408.178 265.986 400.922 274.23 399.061 276.353C398.591 276.884 397.549 275.923 397.946 275.446Z" fill="black"/>
            <path d="M411.047 260.994C410.711 261.457 410.053 261.558 409.589 261.222L408.582 260.49C408.359 260.326 408.21 260.081 408.167 259.808C408.125 259.535 408.191 259.256 408.353 259.032C408.689 258.568 409.348 258.468 409.811 258.804L410.819 259.536C411.289 259.872 411.39 260.53 411.047 260.994Z" fill="black"/>
            <path d="M354.973 304.814C354.973 304.814 355.087 304.552 355.141 304.471C355.181 304.397 355.335 304.182 355.335 304.182L363.21 311.754C363.21 311.754 362.995 311.969 362.901 312.036C362.813 312.103 362.592 312.231 362.592 312.231L354.973 304.814Z" fill="white"/>
          </g>

          {/* Row 4 Pencil */}
          <g
            className="transition-transform duration-[1500ms] ease-out drop-shadow-lg"
            style={{ transform: `translateX(${rows[3].maxWidth * (progress - 1)}px)` }}
          >
            <path d="M379.442 407.892L404.665 376.818C404.819 376.63 404.94 376.415 405.027 376.186L408.306 367.58C409.032 365.672 407.218 363.784 405.484 364.664L397.408 368.769C397.18 368.883 396.965 369.051 396.79 369.246L369.19 400.287C368.712 400.817 368.511 401.57 368.645 402.295C369.136 404.956 371.077 410.875 378.488 408.564C378.858 408.45 379.187 408.208 379.442 407.892Z" fill="#BCAAA4"/>
            <path d="M397.408 368.762L405.484 364.657C407.211 363.777 409.032 365.665 408.306 367.573L405.027 376.18L397.408 368.762Z" fill="#BDBDBD"/>
            <path d="M380 407.872C376.547 411.661 363.25 425.757 355.322 429.224C352.319 430.541 348.543 428.237 349.504 424.494C350.834 419.341 369.411 398.13 369.411 398.13C369.794 397.639 371.246 397.297 371.682 397.478C371.83 397.539 371.279 397.854 371.387 398.029L371.467 398.358C371.534 398.627 371.642 398.889 371.79 399.124C373.644 402.047 376.231 404.009 379.651 405.574C380.027 405.749 381.29 405.742 381.29 405.742C381.29 406.696 380.538 407.281 380 407.872Z" fill="black"/>
            <path d="M407.701 368.964L408.602 366.733C409.233 365.174 407.654 363.636 406.163 364.355L403.825 365.47L407.701 368.964Z" fill="#212121"/>
            <path d="M388.002 383.873L388.345 384.188C388.458 384.292 388.526 384.436 388.534 384.589C388.543 384.742 388.492 384.892 388.392 385.008L375.351 399.877C375.301 399.933 375.242 399.978 375.175 400.011C375.108 400.043 375.035 400.062 374.961 400.067C374.886 400.071 374.812 400.061 374.742 400.036C374.671 400.012 374.607 399.973 374.551 399.924L374.208 399.608C373.973 399.393 373.953 399.023 374.161 398.788L387.202 383.913C387.252 383.857 387.312 383.811 387.379 383.779C387.446 383.746 387.519 383.727 387.594 383.724C387.668 383.72 387.743 383.731 387.813 383.757C387.883 383.782 387.947 383.822 388.002 383.873Z" fill="#FAFAFA"/>
            <path d="M379.772 408.255C376.318 411.991 362.592 426.765 354.664 430.192C351.66 431.488 347.884 429.231 348.845 425.549C350.175 420.476 368.538 399.225 368.538 399.225C369.048 398.58 370.083 398.634 370.506 399.333C372.388 402.443 375.29 404.862 378.764 406.226L379.335 406.448C380.094 406.75 380.316 407.67 379.772 408.255Z" fill="#795548"/>
            <path d="M362.054 405.554C357.546 410.99 353.878 414.792 349.719 421.283C349.342 421.874 348.415 421.014 348.778 420.389C351.822 415.014 359.078 406.77 360.939 404.647C361.409 404.116 362.451 405.077 362.054 405.554Z" fill="black"/>
            <path d="M348.953 420.006C349.289 419.542 349.947 419.442 350.411 419.778L351.418 420.51C351.641 420.674 351.79 420.919 351.833 421.192C351.875 421.465 351.809 421.744 351.647 421.968C351.311 422.432 350.652 422.532 350.189 422.196L349.181 421.464C348.711 421.128 348.61 420.47 348.953 420.006Z" fill="black"/>
            <path d="M405.027 376.186C405.027 376.186 404.913 376.448 404.859 376.529C404.819 376.603 404.665 376.818 404.665 376.818L396.79 369.246C396.79 369.246 397.005 369.031 397.099 368.964C397.187 368.897 397.408 368.769 397.408 368.769L405.027 376.186Z" fill="white"/>
          </g>

          {/* Row 5 Pencil */}
          <g
            className="transition-transform duration-[1500ms] ease-out drop-shadow-lg"
            style={{ transform: `translateX(${rows[4].maxWidth * (progress - 1)}px)` }}
          >
            <path d="M82.4423 518.892L107.665 487.818C107.819 487.63 107.94 487.415 108.027 487.186L111.306 478.58C112.032 476.672 110.218 474.784 108.484 475.664L100.408 479.769C100.18 479.883 99.9648 480.051 99.7902 480.246L72.1895 511.287C71.7125 511.817 71.5109 512.57 71.6453 513.295C72.1358 515.956 74.0775 521.875 81.4883 519.564C81.8578 519.45 82.187 519.208 82.4423 518.892Z" fill="#BCAAA4"/>
            <path d="M100.408 479.762L108.484 475.657C110.211 474.777 112.032 476.665 111.306 478.573L108.027 487.18L100.408 479.762Z" fill="#BDBDBD"/>
            <path d="M83 518.872C79.5466 522.661 66.2502 536.757 58.3221 540.224C55.3188 541.541 51.5429 539.237 52.5036 535.494C53.834 530.341 72.4113 509.13 72.4113 509.13C72.7943 508.639 74.2455 508.297 74.6822 508.478C74.83 508.539 74.2791 508.854 74.3866 509.029L74.4672 509.358C74.5344 509.627 74.6419 509.889 74.7897 510.124C76.6441 513.047 79.2308 515.009 82.6507 516.574C83.0269 516.749 84.29 516.742 84.29 516.742C84.29 517.696 83.5375 518.281 83 518.872Z" fill="black"/>
            <path d="M110.701 479.964L111.602 477.733C112.233 476.174 110.654 474.636 109.163 475.355L106.825 476.47L110.701 479.964Z" fill="#212121"/>
            <path d="M91.002 494.873L91.3447 495.188C91.4576 495.292 91.5257 495.436 91.5344 495.589C91.5432 495.742 91.492 495.892 91.3917 496.008L78.3506 510.877C78.3013 510.933 78.2415 510.978 78.1746 511.011C78.1076 511.043 78.0349 511.062 77.9606 511.067C77.8863 511.071 77.8118 511.061 77.7416 511.036C77.6713 511.012 77.6065 510.973 77.5511 510.924L77.2084 510.608C76.9732 510.393 76.9531 510.023 77.1614 509.788L90.2025 494.913C90.2517 494.857 90.3117 494.811 90.3789 494.779C90.4461 494.746 90.5191 494.727 90.5937 494.724C90.6683 494.72 90.7428 494.731 90.813 494.757C90.8831 494.782 90.9474 494.822 91.002 494.873Z" fill="#FAFAFA"/>
            <path d="M82.7716 519.255C79.3182 522.991 65.5917 537.765 57.6636 541.192C54.6603 542.488 50.8844 540.231 51.8452 536.549C53.1755 531.476 71.5378 510.225 71.5378 510.225C72.0485 509.58 73.0832 509.634 73.5064 510.332C75.3877 513.443 78.2902 515.862 81.7638 517.226L82.3349 517.448C83.0941 517.75 83.3158 518.67 82.7716 519.255Z" fill="#795548"/>
            <path d="M65.0543 516.554C60.546 521.99 56.8776 525.792 52.7187 532.283C52.3424 532.874 51.4152 532.014 51.778 531.389C54.8216 526.014 62.0779 517.77 63.939 515.647C64.4093 515.116 65.4507 516.077 65.0543 516.554Z" fill="black"/>
            <path d="M51.9526 531.006C52.2886 530.542 52.947 530.442 53.4106 530.778L54.4184 531.51C54.641 531.674 54.7899 531.919 54.8327 532.192C54.8755 532.465 54.8087 532.744 54.6468 532.968C54.3109 533.432 53.6525 533.532 53.1889 533.196L52.1811 532.464C51.7107 532.128 51.61 531.47 51.9526 531.006Z" fill="black"/>
            <path d="M108.027 487.186C108.027 487.186 107.913 487.448 107.859 487.529C107.819 487.603 107.665 487.818 107.665 487.818L99.7902 480.246C99.7902 480.246 100.005 480.031 100.099 479.964C100.187 479.897 100.408 479.769 100.408 479.769L108.027 487.186Z" fill="white"/>
          </g>

        </svg>
      </div>
    </div>
  );
};

export default Loading;